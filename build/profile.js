(()=>{"use strict";document.addEventListener("DOMContentLoaded",()=>{const e=document.getElementById("nhrrob-secure-copy-recovery-codes"),o=document.getElementById("nhrrob-secure-download-recovery-codes"),c=()=>{const e=document.querySelectorAll(".nhrrob-secure-recovery-codes-item");return Array.from(e).map(e=>e.innerText.trim()).join("\n")};function t(e){const o=e.querySelector("span:last-child"),c=e.querySelector(".dashicons");if(!o)return;const t=o.innerText,r=c?Array.from(c.classList).find(e=>e.startsWith("dashicons-")):null;o.innerText="nhrrob-secure-copy-recovery-codes"===e.id?"Copied!":"Saved!",e.classList.add("nhrrob-secure-action-success"),c&&(c.classList.remove(r),c.classList.add("dashicons-yes")),setTimeout(()=>{o.innerText=t,e.classList.remove("nhrrob-secure-action-success"),c&&(c.classList.remove("dashicons-yes"),c.classList.add(r))},2e3)}e&&e.addEventListener("click",()=>{const o=c();if(navigator.clipboard&&navigator.clipboard.writeText)navigator.clipboard.writeText(o).then(()=>{t(e)}).catch(e=>{console.error("Failed to copy: ",e)});else{const c=document.createElement("textarea");c.value=o,document.body.appendChild(c),c.select();try{document.execCommand("copy"),t(e)}catch(e){console.error("Fallback copy failed: ",e)}document.body.removeChild(c)}}),o&&o.addEventListener("click",()=>{const e=c(),r=new Blob([e],{type:"text/plain"}),n=window.URL.createObjectURL(r),s=document.createElement("a");s.href=n,s.download="nhrrob-secure-recovery-codes.txt",document.body.appendChild(s),s.click(),window.URL.revokeObjectURL(n),document.body.removeChild(s),t(o)})})})();